{% extends 'dssgmkt/proj_task_base.html' %}

{% block taskcontents %}

  <h4 class="section-header">Task requirements</h4>
  <p>Select below your all the requirements and their importance for this task.</p>

  {% for area_name, area_skills in system_skills.items %}
    <h5 class="section-header">{{ area_name }}</h5>
    <form id="requirementsform">
      <div class="row">
        {% csrf_token %}
        {% for sk in area_skills %}

          <div class="form-group col-lg-3 mt-3">
            <label class="control-label"
                   for="{{ sk.system_skill.id }}">
              {{ sk.system_skill.name }}
            </label>
            <select class="form-control" id="{{ sk.system_skill.id }}" name="{{ sk.system_skill.id }}">
              <option value="-1" {% if not sk.task_requirement %}selected="selected"{% endif %}>None</option>
              {% for level_value, level_name in skill_levels %}
                <option value="{{ level_value }}" {% if sk.task_requirement.level == level_value %}selected="selected"{% endif %}>{{ level_name }}</option>
              {% endfor %}
            </select>
            <select class="form-control mt-2" id="i{{ sk.system_skill.id }}" name="i{{ sk.system_skill.id }}">
              {% for importance, importance_name in importance_levels %}
                <option value="{{ importance }}" {% if sk.task_requirement.importance == importance %}selected="selected"{% endif %}>{{ importance_name }}</option>
              {% endfor %}
            </select>
          </div>
        {% endfor %}
      </div>
    {% endfor %}
    <div class="form-row section-header">
      <div class="col-lg-9 offset-lg-3">
        <button type="submit"
                form="requirementsform"
                formaction="{% url 'dssgmkt:proj_task_requirements_edit' project.id project_task.id %}"
                formmethod="post"
                class="btn btn-success mr-3">
          <i class="material-icons" style="vertical-align: middle">save</i>
          Save task requirements
        </button>
        <a class="btn btn-outline-primary"
           href="{% url 'dssgmkt:proj_task_requirements_edit' project.id project_task.id %}">
           <i class="material-icons" style="vertical-align: middle">close</i>
           Cancel
        </a>
      </div>
    </div>
  </form>
{% endblock %}
